plugins {
    id 'groovy'
    id 'java'
}

group 'org.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.3.11'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

test {
    testLogging {
        showStandardStreams = true
    }
}

task uberjar(type: Jar, dependsOn: [':compileJava',':compileGroovy'] ) {
    manifest {
        attributes 'Main-Class': 'it.subito.puzzle.GameMap'
    }

    // Our groovy classes
    from files(sourceSets.main.output.classesDirs)
    // All groovy classes
    from configurations.runtime.asFileTree.files.collect { zipTree(it) }
}

build {
    dependsOn tasks.named("uberjar")
}